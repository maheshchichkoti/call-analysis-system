# Call Analysis System — Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================
# REQUIRED
# ============================================================

# Supabase Database
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your_supabase_anon_key

# Google Gemini AI
GEMINI_API_KEY=your_gemini_api_key
GEMINI_MODEL=gemini-2.0-flash

# ============================================================
# SMTP EMAIL (Your Company Email)
# ============================================================

# SMTP Server settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=your-email@gmail.com

# Who receives the alert emails (manager, supervisor, etc.)
CALL_ALERT_TARGET_EMAIL=manager@yourcompany.com

# ============================================================
# ZOOM PHONE (For automatic call capture)
# ============================================================

ZOOM_CLIENT_ID=your_zoom_client_id
ZOOM_CLIENT_SECRET=your_zoom_client_secret
ZOOM_ACCOUNT_ID=your_zoom_account_id
ZOOM_WEBHOOK_SECRET_TOKEN=your_webhook_secret

# ============================================================
# SERVER
# ============================================================

# Set to "production" to enforce strict signature verification
ENVIRONMENT=development
LOG_LEVEL=INFO
SERVER_HOST=0.0.0.0
SERVER_PORT=8000

# Dashboard authentication (leave empty to disable in dev)
# In production, set a strong random key
DASHBOARD_API_KEY=

# Zoom signature verification (set to false for development)
REQUIRE_ZOOM_SIGNATURE=true

# ============================================================
# WORKERS
# ============================================================

WORKER_POLL_INTERVAL_SECONDS=30
WORKER_BATCH_SIZE=5
WORKER_MAX_RETRIES=3

# ============================================================
# ANALYSIS PROMPT (Keep this short for best results)
# ============================================================

GEMINI_CALL_ANALYSIS_PROMPT=You are an expert call center quality analyst. Analyze this customer call audio.

TASK: Evaluate the AGENT's performance and provide a JSON response.

SCORING (1-5):
• 5 = Excellent: Professional, helpful, satisfied customer
• 4 = Good: Professional with minor gaps
• 3 = Average: Adequate but noticeable issues
• 2 = Below Average: Unprofessional or unhelpful
• 1 = Poor: Major issues

WARNING FLAGS (only if applicable):
- rude_agent, unresolved_issue, customer_angry, lack_of_empathy, escalation_needed

RULES:
- Focus on AGENT behavior, not customer
- Summary in English, 1-3 sentences max
- Be concise

OUTPUT (JSON only):
{
  "overall_score": 3,
  "has_warning": false,
  "warning_reasons": [],
  "short_summary": "Brief summary here.",
  "customer_sentiment": "neutral",
  "department": "support"
}
